计算机如何感知光亮度
======================

为了保护我们眼睛，日常生活中常用的显示器的亮度大多数是可以随着环境光亮度调节。上一节我们实现BlueFi的LCD屏保来节能的案例，
长时间不按下A或B按钮，说明我们在屏幕显示的内容没人关心，我们需要让LCD屏幕自动进入屏保，关闭背光板这种大能耗设备以节能，当
A或B按钮被按下时，我们自动打开背光板，开启显示。

那么如何做到根据周围环境光亮度调节 BlueFi的LCD屏亮度呢？这个问题首先需要确定BlueFi如何感知环境光亮度。BlueFi的B按钮旁边
有一颗集成的光学传感器，他具备感知环境光亮度的能力。

------------------------

感知环境光亮度
------------------------

我们首先来了解BlueFi的集成光学传感器给出的环境光亮度范围和数值随光亮度变化的趋势。示例程序如下：

.. image:: /../../_static/images/basics/brightness.png
  :scale: 50%
  :align: center

本示例中，我们仍使用上一节用过的输出类中打印值代码块，打印值前面加上了字符"brightness="，将光强度传感器检测到的附近环境光亮度的值显示在屏幕上，
通过手电筒改变环境光，观察环境光传感器的数值变化，确定其范围(最小值和最大值)，以及数值随光变化的趋势。

示例代码分析：

    - 第1行，初始化程序，相当与程序下载进Bluefi之后告知Bluefi从此开始执行程序
    - 第2行，一个无穷循环的程序块
    - 第3行(无穷循环程序块的第1行)，打印值"brightness="，将光强传感器检测到的环境光强度的值打印在LCD显示器上
    - 第4行(无穷循环程序块的第2行)，等待0.01秒(即系统空操作0.01秒)



根据环境光照自动调节屏幕亮度
-------------------------------

下面的示例中，我们将根据环境光照自动调节BlueFi的LCD屏幕亮度，虽然数据映射的方法简单粗暴，但是效果非常明显。示例代码如下：

.. image:: /../../_static/images/basics/brightness1.png
  :scale: 50%
  :align: center

本示例代码是对前一个示例程序稍作修改而来，本示例中我们将环境光强度赋值给了变量bv,我们不必再赘述其每一行程序的效果。只是解
释关键的第5行程序代码块，我们采用一个简单粗暴的数据映射方法"bv/65535"将环境光照数值bv除以65535作为BlueFi的LCD屏幕亮度。



.. admonition:: 
  总结：

    - LCD显示器
    - LCD显示器背光板的亮度及其调节
    - 数据映射
    - 本节中，你总计完成了6行代码的编写工作

------------------------------------


.. Important::
  **出现的代码块**

    - 光亮度(有效值：0~65535),  集成光学传感器的功能之一, 即环境光亮度
